image: containous/traefik # TODO: replace with 'traefik' when PR 3231 is baked into a release
# imageTag: experimental # TODO: replace with latest or some other appropriate tag when PR 3231 is baked into a release
imageTag: bddb4cc33c87108d6bc9ce1dc456024031dfe63b
serviceType : NodePort
externalTrafficPolicy: Cluster
replicas: 1
memoryLimit: 100Mi
cpuLimit: 1
debug:
  enabled: false
ssl:
  enabled: true
  enforced: true
  insecureSkipVerify : true
acme:
  enabled: true
  email: $EMAIL
  staging: false
  logging: true
  domains:
    enabled: true
    domainsList:
      - main: "*.$DOMAIN"
      - sans:
        - "$DOMAIN"
      - main: "*.k.$DOMAIN"
      - main: "*.nd.$DOMAIN"
  challengeType: dns-01
  dnsProvider:
    name: digitalocean
    digitalocean:
      DO_AUTH_TOKEN: "$DO_AUTH_TOKEN"
  persistence:
    enabled: true
    storageClass: "nfs-storage-on-k8s-host"
dashboard:
  enabled: true
  domain: t.k.$DOMAIN
  auth :
    basic:
       $TRAEFIK_AUTH
  statistics:
    recentErrors: 25
service:
  nodePorts:
    http: "32033"
    https: "32121"
rbac:
  enabled: true
deployment:
  hostPort:
    httpEnabled: true
    httpsEnabled: true
    dashboardEnabled: true
keel:
  policy: all
  trigger: poll
  pollSchedule: "@every 1h"
  approvals: 1
  images:
    - repository: image.repository
      tag: image.tag